<!doctype html> <html lang=en > <meta charset=UTF-8 > <meta name=viewport  content="width=device-width, initial-scale=1"> <link rel=stylesheet  href="/emat10006/libs/katex/katex.min.css"> <link rel=stylesheet  href="/emat10006/libs/highlight/github.min.css"> <link rel=stylesheet  href="/emat10006/css/franklin.css"> <link rel=stylesheet  href="/emat10006/css/basic.css"> <link rel=icon  href="/emat10006/assets/favicon.png"> <title> &mdash; Further Computer Programming</title> <header> <div class=blog-name ><a href="">EMAT10006: Further Computer Programming</a></div> <nav> <ul> <li><a href="/emat10006/">Overview</a> <li><a href="/emat10006/materials/">Materials</a> <li><a href="/emat10006/cheatsheet/">Cheatsheet</a> </ul> <img src="/emat10006/assets/hamburger.svg" id=menu-icon > </nav> </header> <div class=franklin-content ><p>EMAT10006: Further Computer Programming</p> <p>Week 4 – Git in Pairs, Matplotlib and Numpy</p> <hr /> <p><strong>Please make sure to sit at the same desks as last week, so that your TA knows where you are&#33;</strong><br />For this week&#39;s worksheet, and the second assignment, you will need to work with one or two partners which should be someone from your TA group.</p> <p>Today we will be:</p> <ol> <li><p>plotting a simple projectile using matplotlib and numpy,</p> <li><p>learning how to work with a partner with git,</p> </ol> <h1>Matplotlib and numpy - A simple projectile</h1> <p>You can either do this task in your pair, or separately.</p> <p>Suppose we want to plot the motion of a simple projectile in the <span class=katex ><span class=katex-mathml ><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi><mo separator=true >,</mo><mi>y</mi></mrow><annotation encoding="application/x-tex">x,y</annotation></semantics></math></span><span class=katex-html  aria-hidden=true ><span class=base ><span class=strut  style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord mathnormal">x</span><span class=mpunct >,</span><span class=mspace  style="margin-right:0.16666666666666666em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span></span></span></span> plane. We can use the following equations to calculate the displacement in <span class=katex ><span class=katex-mathml ><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span class=katex-html  aria-hidden=true ><span class=base ><span class=strut  style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">x</span></span></span></span> and <span class=katex ><span class=katex-mathml ><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>y</mi></mrow><annotation encoding="application/x-tex">y</annotation></semantics></math></span><span class=katex-html  aria-hidden=true ><span class=base ><span class=strut  style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span></span></span></span> at time <span class=katex ><span class=katex-mathml ><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>t</mi></mrow><annotation encoding="application/x-tex">t</annotation></semantics></math></span><span class=katex-html  aria-hidden=true ><span class=base ><span class=strut  style="height:0.61508em;vertical-align:0em;"></span><span class="mord mathnormal">t</span></span></span></span> as:</p> <span class=katex-display ><span class=katex ><span class=katex-mathml ><math xmlns="http://www.w3.org/1998/Math/MathML" display=block ><semantics><mrow><mi>x</mi><mo>=</mo><msub><mi>v</mi><mn>0</mn></msub><mi>t</mi><mi>cos</mi><mo>⁡</mo><mi>θ</mi><mspace width=2em /><mtext>and</mtext><mspace width=2em /><mi>y</mi><mo>=</mo><msub><mi>v</mi><mn>0</mn></msub><mi>t</mi><mi>sin</mi><mo>⁡</mo><mi>θ</mi><mo>−</mo><mn>0.5</mn><mi>g</mi><msup><mi>t</mi><mn>2</mn></msup><mo separator=true >,</mo></mrow><annotation encoding="application/x-tex"> x = v_0 t \cos\theta \qquad \text{and} \qquad y = v_0 t \sin\theta - 0.5gt^2, </annotation></semantics></math></span><span class=katex-html  aria-hidden=true ><span class=base ><span class=strut  style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">x</span><span class=mspace  style="margin-right:0.2777777777777778em;"></span><span class=mrel >=</span><span class=mspace  style="margin-right:0.2777777777777778em;"></span></span><span class=base ><span class=strut  style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class=mord ><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class=msupsub ><span class="vlist-t vlist-t2"><span class=vlist-r ><span class=vlist  style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class=pstrut  style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class=vlist-s >​</span></span><span class=vlist-r ><span class=vlist  style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord mathnormal">t</span><span class=mspace  style="margin-right:0.16666666666666666em;"></span><span class=mop >cos</span><span class=mspace  style="margin-right:0.16666666666666666em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">θ</span><span class=mspace  style="margin-right:2em;"></span><span class="mord text"><span class=mord >and</span></span><span class=mspace  style="margin-right:2em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class=mspace  style="margin-right:0.2777777777777778em;"></span><span class=mrel >=</span><span class=mspace  style="margin-right:0.2777777777777778em;"></span></span><span class=base ><span class=strut  style="height:0.84444em;vertical-align:-0.15em;"></span><span class=mord ><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class=msupsub ><span class="vlist-t vlist-t2"><span class=vlist-r ><span class=vlist  style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class=pstrut  style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class=vlist-s >​</span></span><span class=vlist-r ><span class=vlist  style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord mathnormal">t</span><span class=mspace  style="margin-right:0.16666666666666666em;"></span><span class=mop >sin</span><span class=mspace  style="margin-right:0.16666666666666666em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">θ</span><span class=mspace  style="margin-right:0.2222222222222222em;"></span><span class=mbin >−</span><span class=mspace  style="margin-right:0.2222222222222222em;"></span></span><span class=base ><span class=strut  style="height:1.0585479999999998em;vertical-align:-0.19444em;"></span><span class=mord >0</span><span class=mord >.</span><span class=mord >5</span><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class=mord ><span class="mord mathnormal">t</span><span class=msupsub ><span class=vlist-t ><span class=vlist-r ><span class=vlist  style="height:0.8641079999999999em;"><span style="top:-3.113em;margin-right:0.05em;"><span class=pstrut  style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class=mpunct >,</span></span></span></span></span> <p>where <span class=katex ><span class=katex-mathml ><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>v</mi><mn>0</mn></msub></mrow><annotation encoding="application/x-tex">v_0</annotation></semantics></math></span><span class=katex-html  aria-hidden=true ><span class=base ><span class=strut  style="height:0.58056em;vertical-align:-0.15em;"></span><span class=mord ><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class=msupsub ><span class="vlist-t vlist-t2"><span class=vlist-r ><span class=vlist  style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class=pstrut  style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class=vlist-s >​</span></span><span class=vlist-r ><span class=vlist  style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> is the initial velocity, <span class=katex ><span class=katex-mathml ><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>θ</mi></mrow><annotation encoding="application/x-tex">\theta</annotation></semantics></math></span><span class=katex-html  aria-hidden=true ><span class=base ><span class=strut  style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">θ</span></span></span></span> is the initial launch angle and <span class=katex ><span class=katex-mathml ><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>g</mi></mrow><annotation encoding="application/x-tex">g</annotation></semantics></math></span><span class=katex-html  aria-hidden=true ><span class=base ><span class=strut  style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">g</span></span></span></span> is the gravitational acceleration constant, see figure</p> <p>Download the <a href=projectiles.py >projectiles.py</a>. This contains a very simple <code>Projectiles</code> class which calculates the displacement of a projectile after some time with certain initial conditions.</p> <h2>Exploring the code</h2> <p>Note: Before you can run the code you need to make sure that you have <code>matplotlib</code> and <code>numpy</code> installed. You can test by importing them:</p> <pre><code class="python hljs"><span class=hljs-meta >&gt;&gt;&gt; </span><span class=hljs-keyword >import</span> numpy
<span class=hljs-meta >&gt;&gt;&gt; </span><span class=hljs-keyword >import</span> matplotlib</code></pre> <p>If you installed Python using Anaconda then you should have these modules already installed. If you get an <code>ImportError</code> then you&#39;ll need to install <code>numpy</code> and <code>matplotlib</code> now.</p> <p>First thing to do when faced with new code is to investigate it in the python console. You will want to import <code>numpy</code> as <code>np</code>, this is a convention:</p> <pre><code class="python hljs"><span class=hljs-keyword >import</span> numpy <span class=hljs-keyword >as</span> np</code></pre>
<p>Import the <code>Projectile</code> class into an interactive python session and try running some of the examples given in the doc string. What is returned?</p>
<p>Try using some different values.</p>
<p>Can you write a function which stores the projectile position over some period of time, i.e. the trajectories of the projectiles?</p>
<h2>Plotting the projectile</h2>
<p>Now that we have some data, we want to start plotting it. Have a look at this tutorial: <a href="https://matplotlib.org/stable/tutorials/introductory/pyplot.html">https://matplotlib.org/stable/tutorials/introductory/pyplot.html</a> Make the following plots:</p>
<p>Some line plots showing the trajectories of projectiles with different initial conditions.</p>
<p>A multi-line plot comparing different trajectories.</p>
<p>A scatter plot showing the total displacement in <span class=katex ><span class=katex-mathml ><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span class=katex-html  aria-hidden=true ><span class=base ><span class=strut  style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">x</span></span></span></span> with different initial conditions.</p>
<h1>Pushing, pulling, and merge conflicts</h1>
<p>This exercise requires you to work in your pairs. We will walk through how to push and pull to a remote repo that you share. Along the way you should get a better idea of why Git is so useful when collaborating on projects, as well as some of the complications that it brings&#33;</p>
<p><img src=git-commands.svg  alt="A schematic of your local and remote repositories, showing how changes can be pushed and pulled around." /></p>
<p>Note that throughout this exercise I&#39;m going to &#39;hold your hand&#39; a lot less than previous weeks. You should by now know to run <code>git status</code> &#40;and maybe <code>git log</code>&#41; regularly. You should also be very comfortable with the sequences of commands needed to commit and push changes up to a repo. If not, go back to the worksheet from week 13, or watch Wednesday&#39;s lecture on re/play.</p>
<p>You must take the initiative on walkthroughs like this to make sure that you understand everything that you do, and all of the output that Git gives you. If you don&#39;t fully understand anything, make sure to ask your TA.</p>
<p>Firstly, let&#39;s get a repo up and running with a local clone for either of you.</p>
<p>Just one of you should make a new repo. If you can&#39;t remember how to create a new repo go back to the worksheet from week 13. It&#39;s basically just a matter of hitting the green &#39;New&#39; button on your GitHub homepage and following the instructions. Don&#39;t forget to make it private&#33; Call it &#39;week16-push-pull&#39;.</p>
<p>From now on I&#39;ll refer to the person that made the repo as the &#39;owner&#39; and the other person in the pair as the &#39;collaborator&#39;.  Notice that in the following guide, although I get either the owner or collaborator to do certain tasks, these could be accomplished by either – it&#39;s just an easy way of distinguishing between you both &#40;see the N.B. at the bottom of this section for more info on being the &#39;owner&#39; of a repo&#41;.</p>
<p>The owner should go to the settings tab on their new repo and go to &#39;Manage access&#39;. From here click the &#39;Invite a collaborator&#39; button, and add the collaborator to the project by finding them via their GitHub username. The collaborator should then get an email, asking them to accept the invitation. Now both the owner and the collaborator should be able to see the new repo online, despite it being private.</p>
<p>You should now both clone the repo onto your computers. Again, if you can&#39;t remember how to do this, check back in with the worksheet from week 13. Essentially you just need to get the URL from the &#39;Clone or download&#39; button, then – in a suitable directory on your machine – run the terminal command:</p>
<pre><code class="shell hljs"><span class=hljs-meta >$</span><span class=bash > git <span class=hljs-built_in >clone</span> https://github.com/uob-simon/week14-push-pull</span></code></pre>
<p>with the correct URL. You now both have <em>local</em> repos which are clones of the GitHub repo. If you both run <code>git remote -v</code> it should show you both have the same &#39;origin&#39;, which is a URL to the remote GitHub repo. So although you have local different copies of the repo, the remote repo that you push commits to and pull commits from is <em>the same</em> for both of you.</p>
<p>The owner should now add some stuff to the local repo. I&#39;d recommend adding the projectiles.py file from the previous exercise. They can do this by copying and pasting it into their local repo &#40;using the terminal ideally&#33;&#41; then adding, commiting and pushing it up to the GitHub repo. Again refer back to previous worksheets if you haven&#39;t got the hang of this yet.</p>
<p>Both of you can now look on the GitHub repo webpage, and see the new file and commit.</p>
<p>If the collaborator runs <code>git status</code> it still shows up-to-date, but they actually need to pull down the changes now. If they tried to push their own changes up, Git wouldn&#39;t let them before they&#39;ve pulled. More on this in a moment. For now, the collaborator should run <code>git pull</code> to pull down the changes to their local repo to work on.</p>
<p>You know both have your own local repo and the shared one online. See the figure below for a useful way to picture this. Notice how there&#39;s no arrows connecting the two local repos; all changes must go through the remote GitHub repo. Let&#39;s now intentionally cause some problems...</p>
<p>Firstly, let&#39;s see what happens when one of you tries to push changes to the remote repo without first having pulled down.</p>
<p><strong>Collaborator</strong>: make some minor changes to projectiles.py. Add, commit, and push them. Get in the habit of making good commit messages which concisely describe the changes you&#39;ve made – even if the changes are minor. E.g. change the value of the constant <code>GRAVITY</code> to 9.814 and use the commit message &quot;Alter GRAVITY constant to 4 significant figures&quot;. REMEMBER: you should be running <code>git diff</code> before pushing changes to check you haven&#39;t accidentally made changes you don&#39;t want to push.</p>
<p><strong>Owner</strong>: also make some changes. But for now add them to README.md.  Just add some text or something. Then add, commit and try to push the commit.</p>
<p>You should see some scary message telling you your push was rejected. Read this carefully, Git is actually being very helpful here and tells you precisely the problem; which is that someone else has pushed changes which you don&#39;t have yet. You need to integrate the changes from the remote repo before you can push to it.</p>
<p><strong>Owner</strong>: pull down the changes, noting the info Git gives you about what you just pulled. &#40;Exit from vim by hitting Shift&#43;Z&#43;Z&#41;. As long as you didn&#39;t both make changes to the same lines of projectiles.py, it should &#39;merge&#39; the changes to your files automatically. Git can do this because the differences between the remote repo and yours aren&#39;t &#39;conflicting&#39;, i.e. they weren&#39;t on the same line in the same file.</p>
<p><strong>Owner</strong>: run <code>git status</code>. It will say you are two commits ahead... why two? Use <code>git log</code> to find out. Then, push your changes up&#33; Note how you don&#39;t need to add or commit again.</p>
<p><strong>Exercise for both of you:</strong> now try making changes to the same file, but ensure the changes are on <em>different</em> lines. Both then try and push up without pulling... Whoever does this second should encounter a similar problem. Can Git still merge the changes by itself?</p>
<p>Okay, so far so good. No major problems as Git is handling a lot of the work for us. Look at the commits tab on the remote repo&#39;s webpage, noting how it associates the commits with the user who made them. Let&#39;s now make things worse by creating conflicts which Git can&#39;t resolve by itself.</p>
<p>Ensure when both of you run <code>git status</code> you have a clean working tree, and you have pulled any changes.</p>
<p>Now both change <em>the same line in different ways</em>&#33; Both <code>git diff</code> before you push to make sure you have changed the same line&#33; Only change one line for now. Both add and commit the change.</p>
<p>Owner: push up your change to the online repo. Collaborator: run <code>git pull</code> once the owner has pushed their changes.</p>
<p>Uh-oh, Git is now telling us we have a merge conflict. This is where there is a conflict between the changes and Git can&#39;t sort out the merge by itself. You should see something like:</p>
<pre><code class="shell hljs"><span class=hljs-meta >$</span><span class=bash > git pull</span>
remote: Enumerating objects: 14, done.
remote: Counting objects: 100% (13/13), done.
remote: Compressing objects: 100% (7/7), done.
remote: Total 8 (delta 1), reused 8 (delta 1), pack-reused 0
Unpacking objects: 100% (8/8), done.
From https://github.com/simonw23/merge_conflict_test
   3c06fa3..bf3f0ea  master     -&gt; origin/master
Auto-merging projectiles.py
CONFLICT (content): Merge conflict in projectiles.py
Automatic merge failed; fix conflicts and then commit the result.</code></pre>
<p>Git is telling us it tried to automatically merge the changes with your local repo but failed because of a conflict. We must now fix the conflict locally before re-committing our changes to the remote repo. Notice how the merge conflict is a &#39;local&#39; problem.</p>
<p>If the collaborator now opens projectiles.py they will see that Git has inserted a bunch of stuff to help us resolve the merge conflict.  For example, I changed the value of GRAVITY and so did my collaborator, and now I see:</p>
<pre><code class="python hljs">&lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD
GRAVITY = <span class=hljs-number >0.9813</span>
=======
GRAVITY = <span class=hljs-number >0.9812</span>
&gt;&gt;&gt;&gt;&gt;&gt;&gt; bf3f0ea2df966d6476c5ff47cca7aaee885cde27</code></pre>
<p>at the top of projectiles.py. We can see Git has shown us both versions of the change to the line where <code>GRAVITY</code> is assigned. The one between <code>&lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD</code> and the equals signs is my local change; and the line between the equals signs and <code>&gt;&gt;&gt;&gt;&gt;&gt;&gt; bf3f0...</code> is my collaborator&#39;s changes that I have attempted to merge. &#40;Owner: run <code>git log</code> – can you see where that big long hex string that the collaborator is seeing comes from?&#41;</p>
<p>Git doesn&#39;t know which of these versions should be the one that is kept. It has no way of knowing who is &#39;correct&#39;, and so Git is asking you to sort out your own mess&#33; Essentially, delete the line that you do not want to keep, and leave the line in you do want to keep. Then, remove all of the Git stuff &#40;i.e. the lines starting <code>&gt;&gt;&gt;</code>, <code>&#61;&#61;&#61;</code> and <code>&lt;&lt;&lt;</code>&#41;. <em>You want to have a working Python file at the end&#33;</em></p>
<p>Once you have done this, all you need to do is re-add the file using <code>git add</code> to tell Git that you have resolved the conflict.  Commit and push as normal. Conflict resolved&#33;</p>
<p><strong>Owner</strong>: pull down from the remote repo, and both of you run <code>git log</code> to figure out what Git has done with either of your commits that caused the merge conflict.</p>
<p><strong>Exercise:</strong> Make sure both of you have practice resolving conflicts and understand the output Git gives you to the terminal, as well as the indicators it inserts into files when there is a merge conflict. Also, try changing multiple lines each &#40;some on the same line and some not&#41;. Does Git make you resolve all of them yourself, or just the ones on the same line? What happens if while one user is sorting a merge conflict the other user really winds them up by pushing more changes before the original conflict is resolved?</p>
<p>Merge conflicts are mostly avoidable, by proper division of tasks and good communication between collaborators. However they become almost inevitable as the size of your projects and the size of your team both increase. Understanding why they arise, minimizing how often they arise, and resolving them are all key concepts in Git.</p>
<p><strong>Make sure both of you have understood the previous three cases you&#39;ve just gone through of pushing / pulling from the same remote repo.</strong></p>
<p>N.B. Practically speaking, pushing and pulling from the same remote repo by multiple people is a bad idea in larger projects. Later in the unit we will talk about &#39;forks&#39; and &#39;branches&#39;, which are ways to manage different versions of the same base code by getting Git to keep track of different changes in isolation from each other. This makes it possible to have, for example, one person working on a new feature and another person working on a bug-fix simultaneously, before later merging branches back together in a sensible order. We will also make use of a GitHub feature called &#39;pull requests&#39;, which allow for more control over what ends up on a shared remote repo. At this point, who the &#39;owner&#39; is and who the collaborators are really matters, as it is them who is ultimately in charge of what is merged onto the remote&#39;s master branch.</p>
<div class=page-foot >
  <div class=copyright >
    &copy; Oscar Benjamin. Last modified: February 17, 2021. Website built with <a href="https://github.com/tlienart/Franklin.jl">Franklin.jl</a> and the <a href="https://julialang.org">Julia programming language</a>.
  </div>
</div>
</div>