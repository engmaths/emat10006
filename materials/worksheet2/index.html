<!doctype html> <html lang=en > <meta charset=UTF-8 > <meta name=viewport  content="width=device-width, initial-scale=1"> <link rel=stylesheet  href="/emat10006/libs/highlight/github.min.css"> <link rel=stylesheet  href="/emat10006/css/franklin.css"> <link rel=stylesheet  href="/emat10006/css/basic.css"> <link rel=icon  href="/emat10006/assets/favicon.png"> <title>Git, github and testing worksheet &mdash; Further Computer Programming</title> <header> <div class=blog-name ><a href="">EMAT10006: Further Computer Programming</a></div> <nav> <ul> <li><a href="/emat10006/">Overview</a> <li><a href="/emat10006/materials/">Materials</a> <li><a href="/emat10006/cheatsheet/">Cheatsheet</a> </ul> <img src="/emat10006/assets/hamburger.svg" id=menu-icon > </nav> </header> <div class=franklin-content ><h1 id=git_github_and_testing ><a href="#git_github_and_testing">Git, github and testing</a></h1> <p>For the remainder of this unit we will assume that you are relatively comfortable using the terminal to navigate through directories and perform basic tasks such as running Python scripts. Therefore please make sure you have attempted the majority of last week&#39;s sheet on using the terminal before attempting the remainder of this sheet.</p> <p>Also notice that there are some useful links – including a terminal commands &#39;cheat sheet&#39; – on https://uobfcp.github.io/fcpnotes/<br />Today we will be:</p> <ol> <li><p>making a Github account,</p> <li><p>learning basic Git commands, and making our first Git repository,</p> <li><p>cloning an existing repository, and learning about testing in Python,</p> <li><p>getting set-up with Assignment 1 using Github classroom.</p> </ol> <h2 id=installing_git ><a href="#installing_git">Installing git</a></h2> <p><strong>Windows users</strong>: You should have already installed &quot;git bash&quot; last week. That means that you already have git installed on your computer now.</p> <p><strong>OSX users</strong>: Open the terminal and type <code>git</code>. If it you see output from git then it is already installed. Otherwise it should open a messagebox asking if you want to install the &quot;OSX command line tools&quot;: follow the instructions to install the tools. Then you will have git installed.</p> <p><strong>Linux users</strong>: Install using your package manager e.g. <code>sudo apt install git</code>.</p> <h2 id=getting_a_github_account ><a href="#getting_a_github_account">Getting a GitHub Account</a></h2> <p>For the remainder of this unit you will need a GitHub account. Here, we walk through the process of getting one using your university email address. GitHub is the largest host of source code in the world, with tens of millions of public repositories. It provides remote Git servers for free, giving users a place to store their repositories online. This makes it easy to collaborate with other programmers, work remotely, as well as share code publicly.</p> <ol> <li><p>In a web browser go to <a href="https://github.com/">github.com</a>. You can sign up to GitHub directly from the homepage. Enter an appropriate username, your university email address &#40;e.g. ab12345&#64;bristol.ac.uk&#41; and use a suitably strong password and click &#39;Sign up for GitHub&#39;.</p> <li><p><strong>An important note on usernames:</strong> usernames on GitHub are public. So while you can use whatever pseudonym you like, it will be visible to anyone. Therefore, if you would prefer to remain anonymous, choose a random unrecognisable username &#40;but keep a note of what that username is&#33;&#41;.</p> <li><p>Next you may asked to prove you&#39;re a human by doing a little puzzle... When you&#39;ve convinced them you are human, make sure the email preferences box is <em>unchecked</em> and click &#39;Next: Select a plan&#39;.</p> <li><p>Next, make sure that &#39;Individual&#39; is highlighted, and click the &#39;Choose Free&#39; button.</p> <li><p>Your account has been created&#33; Scroll down to click &#39;Skip this step&#39; to dodge the questions.</p> <li><p>You will now need to check your university email account for a verification link. Click on the &#39;Verify email address&#39; button in the email to verify your account.</p> <li><p>The button will take you to a new repository page, but instead click on the tiny image in the top-right of the page and go to Settings. From there, go to Emails, and make sure that the box that says &#39;Keep my email addresses private&#39; is <em>checked</em>.</p> <li><p>All sorted, you can now move on to making your first repository&#33;</p> </ol> <h1 id=our_first_git_repository ><a href="#our_first_git_repository">Our first Git repository</a></h1> <p>As you know from the lecture, a repository &#40;or repo for short&#41; is where you store all the files for a particular project. Repos on GitHub have a unique URL associated with them. If they are public, this means anyone can use this URL to make their own clone of the code. The user can even make changes and, if they think other users might also benefit from these changes, they can request that the owner incorporates the changes into the repo &#40;a &#39;pull request&#39;&#41;.</p> <p>Let&#39;s create our first repo, but we will keep ours private for now&#33;</p> <p>When you are signed in to GitHub, on the homepage, there&#39;s a green button on the left labeled &#39;Create repository&#39;. Press this and it will take you to a page where we can make a blank repo.</p> <p>Give your repo a suitable name &#40;e.g. &#39;fcp-week14&#39;&#41;, and a description if you like, then make sure the Private option is selected. Tick the &#39;Initialise this repository with a README&#39; box, then click &#39;Create Repository&#39;.</p> <p>This creates a repo and takes you to that repo&#39;s unique page &#40;notice the URL has the format &#39;github.com/your&#95;user&#95;name/your&#95;repo&#95;name&#39;&#41;. The only file in the repo will be a README.md, and it tells you that it was created on the &#39;Initial commit&#39;. The contents of the README.md is displayed at the bottom. It is written in &#39;markdown&#39; &#40;hence the .md file suffix&#41;, but you can just think of it as a txt file with some fancy formatting options similar to html.</p> <p>There&#39;s lots of information on the repo&#39;s webpage which we will introduce in the coming weeks. But first let&#39;s add some files and practice committing them to our repo. First we&#39;re going to need a local &#39;clone&#39; of the repo on our computer, so that we can add and edit files on our computer before putting them on the repo.</p> <p>From the repo page, click the green &#39;Clone or Download&#39; button, and copy the link that it gives you. Then in a terminal window, navigate to a suitable place to create a new local repo, such as Documents. Then type <code>git clone</code> followed by a space and the URL you just copied.</p> <p>Note at this stage you might find that <code>git clone</code> fails saying something like <code>authentication failed</code>. I found that this happened the first time I tried to clone a repo using a new github account. Running the exact same command again a second time fixed the problem &#40;no idea why that works&#33;&#41;.</p> <p>In a strange pop-up window you will be asked to enter your GitHub username and password. You might also need to click &quot;Authorise credential manager&quot; or something like that...</p> <p>Once you have done that you should see something like this:</p> <pre><code class="console hljs"><span class=hljs-meta >$</span><span class=bash > git <span class=hljs-built_in >clone</span> https://github.com/uob-simon/fcp-week14.git</span>
Cloning into &#x27;fcp-week14&#x27;...
remote: Enumerating objects: 3, done.
remote: Counting objects: 100\% (3/3), done.
remote: Total 3 (delta 0), reused 0 (delta 0), pack-reused 0
Unpacking objects: 100\% (3/3), done.</code></pre> <p>This is Git telling us it has succesfully cloned our online repo on GitHub into a local repo on our computer. While on your computer, a repo is basically just a folder with a special .git folder in it. If you <code>cd</code> into your new repo and enter <code>ls -a</code> you&#39;ll see it. Git uses this folder to store all the data it needs to do its version control magic, but you don&#39;t really need to worry about what&#39;s in it.</p> <p>We can clone any repo we have access to &#40;i.e. if the repo is public, or we are a collaborator on a private repo&#41; by running <code>git clone repo_url</code>. You&#39;ll need to do this to get the code for the assignment&#33;</p> <p>Okay, so we now have an exact copy of our online repo on our local machine. These two instances of the repo do not &#39;sync&#39; automatically like Google Drive or Microsoft&#39;s OneDrive. If we make changes locally, they won&#39;t appear in our online GitHub repo until we explicitly &#39;push&#39; them there. Equally, if a collaborator made changes to the GitHub repo, the changes won&#39;t appear locally until we &#39;pull&#39; them down. This gives us complete control over when and how the contents of our repo changes. Let&#39;s explore how we push changes from the computer up to GitHub using Git now. This takes us through a few of the fundamental Git commands and concepts. First up: making a commit.</p> <h1 id=making_your_first_commit ><a href="#making_your_first_commit">Making your first commit</a></h1> <p>When you have <code>cd</code>&#39;ed into your repo, type <code>git status</code> and hit enter. Git tells us that we are on the master branch &#40;more on this in future weeks&#41; and that there is nothing to commit, and our working directory is clean. This is Git telling us that all is well – we have not made any changes to the contents of our new repo.</p> <p>Let&#39;s add a simple Python script to our repo. When inside your repo directory, type <code>gedit welcome.py</code> and copy this very simple script in there and save it:</p> <pre><code class="console hljs"><span class=hljs-meta >#</span><span class=bash >! /usr/bin/python3</span>
print(&quot;Welcome to my repository&quot;)</code></pre> <p>Type <code>ls</code> to see the new script, then try the command <code>git status</code> again. You should see something like:</p> <pre><code class="console hljs"><span class=hljs-meta >$</span><span class=bash > git status</span>
 On branch master
 Untracked files:
   (use &quot;git add &lt;file&gt;...&quot; to include in what will be committed)

  welcome.py
nothing added to commit but untracked files present (use &quot;git add&quot; to track)</code></pre> <p>This essentially says that Git has noticed we have made a new file, but until we add it using <code>git add</code>, Git is not going to do anything with it.</p> <p>Get used to running <code>git status</code> after nearly every new command you enter to check what Git is seeing, as it tracks changes to files, new files, etc.</p> <p>So let&#39;s take Git&#39;s advice and &#39;add&#39; our new file. Enter the command <code>git add welcome.py</code>. Then try <code>git status</code> again. The output from Git now says there is one new file, welcome.py, which comes under &#39;Changes to be committed&#39;.</p> <p>A quick aside: each Git <strong>commit</strong> is a record of what files have changed since the previous commit. You can think of them as like snapshots of your repo, which you take regularly to keep a tracked history of how your repo has changed since it began. They form the foundation of Git&#39;s &#39;version control&#39;, and allow you to go back to a previous state of the repo by going back to a particular commit.</p> <p>Back to our file: by adding it, the file is now in the Git &#39;staging area&#39;. The staging area is where we put the files that we wish to commit. So the files listed under &#39;Changes to be committed:&#39; when we run <code>git status</code> are in the staging area.</p> <p>Once we are happy with the new / changed files which are in the staging area, we can make our commit. Type the following and you should see some similar output:</p> <pre><code class="console hljs"><span class=hljs-meta >$</span><span class=bash > git commit -m <span class=hljs-string >&quot;Add a new welcome script&quot;</span></span>
[master 60d6d24] Add a new welcome script
Committer: Simon Webber &lt;sw1850@it075705.wks.bris.ac.uk&gt;
1 file changed, 2 insertions(+)
create mode 100644 welcome.py</code></pre> <p>The string after the <code>-m</code> flag is the commit message. It can be whatever you like, but it should be short, informative and usually worded like a command &#40;e.g. starting with &quot;Add ... \&quot;, &quot;Change ... \&quot;, &quot;Fix ... \&quot;&#41;. When you look back at your commits the message will be included, so you should be able to understand what state your repo was in just by lokoing through recent commit messages. Notice also how Git gives a summary of what has changed: it tells us one file has been changed, and that in that file there have been 2 &#39;insertions&#39;. Git keeps track of what has changed line-by-line, so these two insertions refer to the two lines of code we added in our script.</p> <p>So we&#39;ve made our first commit&#33; Next – of course – we try <code>git status</code> again. You will see something like this:</p> <pre><code class="console hljs"><span class=hljs-meta >$</span><span class=bash > git status</span>
 On branch master
 Your branch is ahead of &#x27;origin/master&#x27; by 1 commit.
   (use &quot;git push&quot; to publish your local commits)

nothing to commit, working directory clean</code></pre> <p>This tells us two important things: firstly that our local repo is now ahead of our online repo &#40;which by default is called <code>origin/master</code>&#41; by the one commit we just made; and also that our working directory is once again &#39;clean&#39;. This means there are no further new changes which require committing as we haven&#39;t changed anything since our most recent commit.</p> <p>So the current state of our GitHub &#40;remote&#41; repo and our local repo are different: our local one contains our new welcome script and the remote one does not. We will push our commit online shortly to bring them back inline, but first we take a look at a few more important Git commands.</p> <h1 id=viewing_diffs_and_logs ><a href="#viewing_diffs_and_logs">Viewing diffs and logs</a></h1> <p>Let&#39;s make some changes to our <code>welcome.py</code> script, and see what Git can tell us about those changes. I updated mine to include another print line following the previous one. Entering <code>git status</code> we can see Git has seen the new changes, and tells us there is a modified file which is not in the staging area.</p> <p>Now enter <code>git diff</code> and you should see output which looks something like this:</p> <pre><code class="console hljs"><span class=hljs-meta >$</span><span class=bash > git diff</span>
diff --git a/welcome.py b/welcome.py
index 04b3760..2748ae8 100644
--- a/welcome.py
+++ b/welcome.py
@@ -1,2 +1,3 @@
<span class=hljs-meta > #</span><span class=bash >! /usr/bin/venv/python</span>
 print(&quot;Welcome to my repository&quot;)
+print(&quot;There isn&#x27;t much here yet&quot;)</code></pre> <p>That&#39;s quite a lot of output even for a small file&#33; The first line, starting with <code>diff</code> tells us the two files which the diff command is comparing: <code>a/welcome.py</code> and <code>b/welcome.py</code>. These are the two different versions of our script. Don&#39;t worry too much about the second line. The next two lines starting with <code>&#43;&#43;&#43;</code> and <code>---</code> are giving us a key to identify either file by. So changes to <code>a/welcome.py</code> will be marked with a plus symbol, and changes to <code>b/welcome.py</code> will be marked with a minus symbol. Next comes the main part of the diff, the &#39;diff chunks&#39;. These tell us what is different between the two versions, and where the difference occurs. The line with the <code>@</code> symbols is like a summary, and the lines after are the actual changes. Here, we can see that version <code>a/welcome.py</code> has an additional line, denoted by the <code>&#43;</code> and the contents of the line.</p> <p><strong>Exercise</strong>: Try changing the file more and viewing the diff each time. What happens when you modify an existing line and run diff?</p> <p>The purpose of diffs will become clearer as your projects grow in size and as you begin to collaborate on code. It gives you an instant way of seeing, for example, changes a peer has made to a file since a previous commit – even if that file is buried among hundreds of other files and folder in your repo. For now, concentrate on understanding the output it gives you&#33;</p> <p>Also always make sure to run diff <em>before</em> making a commit, to make sure you aren&#39;t accidentally committing silly changes&#33;</p> <p><strong>Exercise:</strong> Try changing an existing line and viewing the diff. Can you see what I mean by Git working &#39;line-by-line&#39;?</p> <p><strong>Exercise:</strong> Add a new file to your repo &#40;it can be anything – another Python script, or just a txt file&#41;. Then add and commit your changes, with a suitable commit message. Make sure you <code>git status</code> regularly, and ensure you understand <em>all</em> of what Git is telling you&#33; Once you have committed these changes, try editing both files and then running <code>git diff</code>. Interpret this output. Also try <code>git diff welcome.py</code> to only see the diff for that file.</p> <p>Note, diffs are opened in a special terminal mode. If you have a line with just a colon on it that means there is more output to see, just hit enter to see it. To exit press the Q key.</p> <p>Now you have made a few commits, try running the command <code>git log</code>. This shows all of your previous commits, with the commit message, who made the commit and when. If you make regular commits the log should look like a timeline of changes to your repo. In the future, we will look at how you can change which commit Git is looking at, allowing you to go back in the timeline to the state of the repo at previous commits in your code&#39;s log.</p> <p>Now we have a repo with a bunch of new commits and changes on it. Let&#39;s look at how we now get those changes to our GitHub remote repo.</p> <h2 id=pushing_our_commits_to_github ><a href="#pushing_our_commits_to_github">Pushing our commits to github</a></h2> <p>Finally we are ready to push our commits up to our online repo. Ensure your working tree is clean when you run <code>git status</code>, and that it informs you that you are a few commits ahead of <code>origin/master</code>.</p> <p>Run the command <code>git push</code>, and you will see some output giving information on the upload.</p> <p>Check all of your commits have been pushed by running <code>git status</code>, you should now see:</p> <pre><code class="console hljs"><span class=hljs-meta >$</span><span class=bash > git status</span>
On branch master
Your branch is up to date with &#x27;origin/master&#x27;.

nothing to commit, working tree clean</code></pre> <p>Now have a look at the changes online by going back to your repo&#39;s webpage. You will see your new files, and next to their filenames, the commit message belonging to the commit that they were last edited in. So if you did not change the README.md, it should still say &#39;Initial commit&#39;. You can also click on the Commits tab and see all of your commits, similar to running the log command in the terminal.</p> <p>So now both of your repos are up-to-date with each other.</p> <h2 id=round_up ><a href="#round_up">Round up</a></h2> <p>At this point try playing around with it. Make changes to your code, commit the changes, push them etc. Check <code>git log</code>, <code>git status</code> etc. Try to understand what all of the commands do and familiarise yourself with them. Check to see if you can see the changes on github.</p> <p>Try starting again: create a new repo on github, clone the repo, add files, commit them and push the commits up to github. Can you see your changes on github?</p> <p>Look at your repos on github. Explore the information that github has to show about them. Take a look at a more complicated repo like the <a href="https://github.com/matplotlib/matplotlib">matplotlib repo</a>.</p> <p>Finally share your repo with your TA &#40;you will need to know their github username to do this&#41;. Go to your repo and click &quot;settings&quot; and then &quot;manage access&quot; and then &quot;invite a collaborator&quot;.</p> <h1 id=thats_all ><a href="#thats_all">That&#39;s all&#33;</a></h1> <div class=page-foot > <div class=copyright > &copy; Oscar Benjamin. Last modified: February 16, 2021. Website built with <a href="https://github.com/tlienart/Franklin.jl">Franklin.jl</a> and the <a href="https://julialang.org">Julia programming language</a>. </div> </div> </div>